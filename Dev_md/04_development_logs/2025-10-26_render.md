 Render.com ì„¤ì • ë‚´ì—­

  ğŸ“‹ ê¸°ë³¸ ì„œë¹„ìŠ¤ ì„¤ì •

  Web Service

  Name: nong-view-api
  Environment: python
  Plan: starter (ë¬´ë£Œ í”Œëœ - ì›” 750ì‹œê°„)
  Branch: main
  Build Command: chmod +x build.sh && ./build.sh
  Start Command: chmod +x start.sh && ./start.sh

  ğŸ”§ Build Command ë‚´ì—­ (build.sh)

  #!/bin/bash
  # 1. ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸
  apt-get update

  # 2. ë¹Œë“œ ë„êµ¬ ì„¤ì¹˜
  apt-get install -y build-essential g++ gcc libc6-dev pkg-config

  # 3. GDAL ì§€ë¦¬ì •ë³´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
  apt-get install -y gdal-bin libgdal-dev libproj-dev proj-data proj-bin

  # 4. Rust íˆ´ì²´ì¸ ì„¤ì¹˜ (/tmp ë””ë ‰í† ë¦¬ ì‚¬ìš©)
  export CARGO_HOME=/tmp/cargo
  export RUSTUP_HOME=/tmp/rustup
  curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y

  # 5. Python ì˜ì¡´ì„± ì„¤ì¹˜ (ë‹¤ë‹¨ê³„ fallback)
  pip install --upgrade pip setuptools wheel

  # ë‹¨ê³„ë³„ ì‹œë„:
  # - requirements.txt (FastAPI 0.68.0 + pydantic 1.10.13)
  # - requirements-emergency.txt (ìµœì†Œí•œ)
  # - requirements-bare.txt (Starletteë§Œ)
  # - ìˆ˜ë™ ì„¤ì¹˜ (uvicorn + starlette)

  # 6. ë””ë ‰í† ë¦¬ ìƒì„±
  mkdir -p /tmp/uploads /tmp/crops /tmp/exports

  ğŸ¯ Start Command ë‚´ì—­ (start.sh)

  #!/bin/bash
  # 1. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
  export GDAL_CONFIG=/usr/bin/gdal-config
  export GDAL_DATA=/usr/share/gdal
  export PROJ_LIB=/usr/share/proj

  # 2. ë””ë ‰í† ë¦¬ ìƒì„±
  mkdir -p /tmp/uploads /tmp/crops /tmp/exports

  # 3. API ì„œë²„ ì‹œì‘ (ë‹¨ê³„ë³„ fallback)
  cd api

  # ì‹œë„ ìˆœì„œ:
  # 1. main_bare.py (Starletteë§Œ - ìµœì†Œ)
  # 2. main_emergency.py (FastAPI ìµœì†Œ)
  # 3. main_simple.py (FastAPI í™•ì¥)
  # 4. main.py (ì „ì²´ ê¸°ëŠ¥)

  uvicorn [ì„ íƒëœAPI]:app --host 0.0.0.0 --port $PORT --workers 1

  ğŸŒ í™˜ê²½ë³€ìˆ˜ ì„¤ì •

  í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜

  PYTHON_VERSION=3.10.12
  ENVIRONMENT=production
  PORT=[Renderê°€ ìë™ í• ë‹¹]

  ì§€ë¦¬ì •ë³´ ì„¤ì •

  GDAL_CONFIG=/usr/bin/gdal-config
  GDAL_DATA=/usr/share/gdal
  PROJ_LIB=/usr/share/proj

  API ì„¤ì •

  API_V1_STR=/api/v1
  PROJECT_NAME=Nong-View API

  íŒŒì¼ ì €ì¥ì†Œ

  UPLOAD_PATH=/tmp/uploads
  CROP_PATH=/tmp/crops
  EXPORT_PATH=/tmp/exports

  ë³´ì•ˆ ì„¤ì •

  SECRET_KEY=[ìë™ ìƒì„±]
  ACCESS_TOKEN_EXPIRE_MINUTES=1440

  CORS ì„¤ì •

  ALLOWED_HOSTS=*
  CORS_ORIGINS=https://your-frontend-domain.com,http://localhost:3000

  ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

  PostgreSQL

  Name: nong-view-db
  Plan: free (1GB ì €ì¥ì†Œ)
  Database: nongview
  User: nongview_user
  Extensions: postgis, uuid-ossp

  Redis

  Name: nong-view-redis
  Plan: free (25MB)
  Policy: allkeys-lru

  ğŸ“Š ì„œë¹„ìŠ¤ URL

  ë©”ì¸ ì„œë¹„ìŠ¤: https://nong-view.onrender.com

  ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸:
  - / - ë£¨íŠ¸ (ìƒíƒœ í™•ì¸)
  - /health - í—¬ìŠ¤ ì²´í¬
  - /test - í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸
  - /api/docs - API ë¬¸ì„œ (FastAPI ìë™ ìƒì„±)

  í˜„ì¬ ë‹¤ë‹¨ê³„ fallback ì‹œìŠ¤í…œìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆì–´, ì˜ì¡´ì„± ë¬¸ì œê°€ ë°œìƒí•´ë„ ìµœì†Œí•œ Starlette ê¸°ë°˜ APIëŠ” ë™ì‘í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
